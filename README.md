# In Falsus Demo - Asset Decryptor

本工具用于解密《In Falsus Demo》游戏中的加密资源文件

> **注意**：解密后的文件仅供个人学习、研究或 Mod 制作使用。

---

## ⚠️ 法律免责声明 (Legal Disclaimer)

**在使用本工具之前，请务必仔细阅读以下条款：**

1.  **版权归属**：本工具解密出的所有资源（包括但不限于音频、图片、文本脚本）的版权均归属于lowiro。
2.  **仅限个人学习**：本教程及工具仅供计算机安全研究、逆向工程学习或个人备份使用。
3.  **禁止非法传播**：**严禁**将解密后的原始游戏资源（如 BGM 音频文件、谱面数据）上传到任何公共网络平台、用于商业用途或进行二次分发。
4.  **后果自负**：使用者因违反上述规定而产生的任何法律纠纷（如侵犯版权），由使用者自行承担，工具作者不承担任何连带责任。
5.  **修改风险**：修改游戏文件可能会导致游戏崩溃、存档损坏或账号被封禁（如果涉及在线功能），请务必在操作前备份。

**继续使用本工具即表示您同意上述条款。**

---

## 📂 准备工作

在开始之前，请确保您已经：
1.  下载并安装了《In Falsus Demo》。
2.  找到了游戏的安装目录（通常在 Steam 库 -> 右键游戏 -> 管理 -> 浏览本地文件）。
3.  准备好了本工具提供的修改版 `Game.dll` 和 `SamDecryptor.dll`。

加密资源文件通常位于：
`..\In Falsus Demo\if-app_Data\StreamingAssets\sam\`

---

## 🚀 使用步骤

### 1. 备份核心文件
进入游戏目录下的 `Managed` 文件夹：
`..\In Falsus Demo\if-app_Data\Managed\`
找到原版的 **`Game.dll`** 并将其复制一份到安全的地方进行备份。
> **重要**：这是恢复游戏正常运行的关键步骤。

### 2. 替换 DLL
将工具包中提供的修改版 **`Game.dll`** 复制到 `Managed` 文件夹中，覆盖原文件。

### 3. 准备加密源文件
1.  回到游戏根目录（即 `if-app.exe` 所在的目录）。
2.  新建一个名为 **`EncryptedSource`** 的文件夹。
3.  将游戏资源目录 `..\if-app_Data\StreamingAssets\sam\` 中的所有文件复制到刚才新建的 `EncryptedSource` 文件夹中。

### 4. 部署解密插件
将工具包中的 **`SamDecryptor.dll`** 放入游戏根目录。

### 5. 运行解密
1.  在 Steam 中启动游戏。
2.  等待游戏加载，直到出现**标题界面**。
3.  此时解密程序已在后台运行完毕。

### 6. 获取结果
回到游戏根目录，你会发现自动生成了一个 **`DecryptedOutput`** 文件夹。
解密成功的文件（`.ogg`, `.txt`, `.bin` 等）均已存放在其中。

---

## ❓ 常见问题排查

若未成功生成解密文件或 `DecryptedOutput` 文件夹为空：

1.  **检查日志**：请查看游戏根目录下生成的 `hook_debug.txt` 和 `decrypt_log.txt` 文件，里面记录了详细的错误信息。
2.  **检查路径**：确保 `EncryptedSource` 文件夹名字没有拼错，且位置正确。
3.  **检查权限**：尝试以管理员身份运行游戏。

---

## 🔄 恢复游戏

解密完成后，为了保证游戏的正常更新和运行，请务必执行以下操作：

1.  删除修改版的 `Game.dll`。
2.  将**第 1 步**中备份的原版 `Game.dll` 复制回 `Managed` 文件夹。
3.  或者，在 Steam 中右键游戏 -> 属性 -> 已安装文件 -> **验证游戏文件的完整性**。
